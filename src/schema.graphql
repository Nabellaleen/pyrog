# import Database, Resource, Attribute from "./generated/prisma-binding/prisma.graphql"

type Query {
    # BINDING QUERIES
    # attribute(where: AttributeWhereUniqueInput): Attribute!
    # attributes: [Attribute!]
    # databases: [Database!]!

    # CLIENT QUERIES
    allDatabases: [Database!]!
    availableResources(database: String!): [Resource!]
    availableAttributes(resourceId: ID!): [Attribute!]
    inputColumns(attributeId: ID!): [InputColumn!]
    me: User
}

type Mutation {
    createInputColumnViaAttribute(id: ID!, data: InputColumnCreateInput): Attribute!
    deleteInputColumnViaAttribute(attributeId: ID!, inputColumnId: ID!): Attribute!
    updateInputColumn(id: ID!, data: InputColumnUpdateInput): InputColumn!
    # updateAttributeNoId(database: String!, resource: String!, attributePath: [String!]!, data: AttributeUpdateInput): Attribute!
    # updateAttribute(id: ID!, data: AttributeUpdateInput): Attribute!
    # updateInputColumn(id: ID!, data: InputColumnUpdateInput): InputColumn!
    # updateResource(id: ID!, data: ResourceUpdateInput): Resource!
    # updateJoin(id: ID!, data: JoinUpdateInput): Join!
    createResourceTreeInDatabase(database: String!, resource: String!): Resource!
    createAttributeProfileInAttribute(parent_attribute_id: ID!, child_attribute_name: String!, child_attribute_type: String!): Attribute!
    deleteAttribute(id: ID!): Attribute!

    signup(email: String!, password: String!, name: String!): AuthPayload!
    login(email: String!, password: String!): AuthPayload!
}

type Subscription {
    attribute(id: ID!): [InputColumn!]
    inputColumn(id: ID!): InputColumn
    resource(id: ID!): Resource
    join(id: ID!): Join
}

type AuthPayload {
    token: String!
    user: User!
}
